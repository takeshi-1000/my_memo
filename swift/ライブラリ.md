## ライブラリツール (パッケージ管理ツール)

- Cocoapods
- Carthage
- SwiftPacakageManager

### ツール使わない場合

自分でダウンロードして、紐付け？

## ライブラリの形式

- フレームワーク(.framework) ※下の二種類あるが、見た目で区別はできない
    - ダイナミック
        - モジュールを含む
        - モジュールを含まない
    - スタティック
        - モジュールを含む
        - モジュールを含まない
- ダイナミックライブラリ(lib.dylib)
- スタティックライブラリ(lib.a)

### フレームワークとライブラリの違い

- フレームワークはバンドルを持つ
- ライブラリはバンドルを持たない

※バンドルとは、Appleプラットフォームにおいてある一定のルールに従って生成されるディレクトリのこと（e.x. MyApp.app, MyApp.xcworkspace, UIKit.framework）

<img width="684" alt="スクリーンショット 2022-08-09 9 04 57" src="https://user-images.githubusercontent.com/16571394/183534925-7a4cf92c-f4f3-475a-9c6e-53af25278d48.png">

## スタティックにリンクする、ダイナミックにリンクするとは

### 前提

Apple Platform Applicationを起動させるために、通常は下記の工程が必要である。

(1)プリコンパイル -> (2)分割コンパイル -> (3)アセンブル -> (4)リンク -> (5)実行バイナリ生成 -> (6)実行バイナリロード

※Carthageの場合だと、すでに(1) ~ (3) まで終えたバイナリ(オブジェクトコード)を引っ張って開発するのに対し、
Cocoapodsの場合は、ソースコードそのものを引っ張ってくるのでライブラリそれぞれに対して(1)の工程から発生するため
開発体験として、CocoapodsよりもCarthageの方が良さそうみたいなこと

https://qiita.com/usamik26/items/ce037326a62f05ac47c7 Cocoapodsをバイナリ化できるライブラリあるけどどうなのか

### スタティックリンク

- 上記の工程の(4)のタイミングで、シンボル解決できるリンク方法をスタティックリンクという。
- スタティックリンクでは、実行バイナリそのものにライブラリの定義(実行コード自体？)を埋め込む

### ダイナミックリンク

- 上記の工程の(6)のタイミングで、シンボル解決できるリンク方法をダイナミックリンクという
- ダイナミックリンクでは、(4)の工程ではライブラリの参照のみを紐づけておき、(6)の工程のロード時に別で存在するライブラリの実態と参照を結びつける

## import とは

- ライブラリの公開API(クラスや関数等のシンボル)をソースコード上で使用するためのswiftの言語仕様
- コンパイルのタイミングで解決される。（2）の工程

Podだと下記あたりにimportに必要なmoduleファイル確認

Pods/Target Support Files/ライブラリ名/xxxx.modulemap

<img width="1224" alt="スクリーンショット 2022-08-09 9 39 13" src="https://user-images.githubusercontent.com/16571394/183538093-dd6c6229-866a-4fb3-8d1e-40e53ee54f4a.png">

Carthage

[WIP]

Swift Pacage Manager

DerivedDataに出力されるっぽい。この辺り消しても毎回ビルド時(コンパイル時？impor Hogeって書いたらmoduleMap生成してくれる)に再生成するので、他よりも安全な印象

<img width="1271" alt="スクリーンショット 2022-08-09 15 56 47" src="https://user-images.githubusercontent.com/16571394/183584318-7989b2cd-a5d8-4e8d-a311-2e58bdfd6f21.png">


## 参考リンク

https://www.youtube.com/watch?v=FZoYyAEPJ8w
