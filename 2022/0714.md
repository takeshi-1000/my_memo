## 並行/並列/スレッドなど

- 並行: ある二つ以上の処理をどちらも実行できる状態にあること

<img width="443" alt="スクリーンショット 2022-07-14 9 17 52" src="https://user-images.githubusercontent.com/16571394/178858483-402e5c35-4dbb-446e-890c-7c5058c8cf78.png">

- 並行: ある二つ以上の処理を同じ時間に実行できること

<img width="240" alt="スクリーンショット 2022-07-14 8 59 27" src="https://user-images.githubusercontent.com/16571394/178856973-6f5886af-0e63-4a08-a268-07a311763f3c.png">

- 並列/並行の話はプロセス/スレッドの中で出てくる話
- プロセスは一つ以上のスレッドを持つ
- スレッドは一つのcpuで裁かれる

<img width="240" alt="スクリーンショット 2022-07-14 9 05 47" src="https://user-images.githubusercontent.com/16571394/178857403-d862dde6-9103-4820-92a3-459075d005cd.png">

- プロセスはそれぞれに仮想メモリが割り当てられ、スレッドは属しているプロセスのメモリ内にアクセスできる

<img width="500" alt="スクリーンショット 2022-07-14 9 10 43" src="https://user-images.githubusercontent.com/16571394/178857813-20b71ecd-d6cf-40a1-9808-f4205f7ffc9a.png">


### おまけ

#### lldbでスレッド一覧を表示

`(lldb) th list`

Xcodeの適当なプロジェクトで、ボタンタップ時にbreakpoint打って止めた際のthread
```
(lldb) th list
Process 67577 stopped
* thread #1: tid = 0x26fd24, 0x000000010250aae0 test20220708`closure #1 in ContentView.body.getter at ContentView.swift:16:9, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
  thread #2: tid = 0x26fd6d, 0x00000001cc057b9c libsystem_kernel.dylib`__workq_kernreturn + 8
  thread #5: tid = 0x26fd70, 0x00000001cc056050 libsystem_kernel.dylib`mach_msg_trap + 8, name = 'com.apple.uikit.eventfetch-thread'
  thread #8: tid = 0x26fd73, 0x00000001cc057b9c libsystem_kernel.dylib`__workq_kernreturn + 8
(lldb) c
```

c言語でhelloworld的なやつ

```
(lldb) th list
Process 67594 stopped
* thread #1: tid = 0x26ff5d, 0x0000000100003f70 a.out`main, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1
```

#### アクティビティモニタでプロセス確認

<img width="700" alt="スクリーンショット 2022-07-14 9 15 24" src="https://user-images.githubusercontent.com/16571394/178858328-7d09434d-01ad-4e6d-8532-0930b19d14d4.png">
