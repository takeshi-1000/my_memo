## [Swift] nested functions

関数内で、関数を定義することができる。

例えば、test関数の中で、testInternal関数を定義したとすると、testInternalのスコープでも、amountをキャプチャできるということ。

```

func test(amount: Int) {
  
   func testInternal() {
     // amount 使える
   }
}

```

[所感]

- あまり使っている箇所見たことない
- 複雑な計算処理とかであれば、privateにせずに、子の関数をinternalにするとかにしたほうが良いのか。

参考: https://docs.swift.org/swift-book/LanguageGuide/Functions.html#ID178

## [Swift] escaping closure 続き

### 前提

escaping closureになるかは、(引数にclosureを持った)関数が、その処理完了後に、closureをエスケープする（別スコープで使えるようにクロージャーを脱出）必要があるかで変わる

前ここでちょっと書いた → https://github.com/takeshi-1000/my_memo/blob/main/2022/0414.md#swift-escaping

escaping closureを持つ関数では、呼び出しもとでselfを明示するか、キャプチャリストにselfを使わないと、コンパイルエラーになる → クロージャーは強い参照を持ちやすいため、メモリ管理の最適化(weak self等)を促すようにしている？
